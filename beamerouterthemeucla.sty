% !TEX root = example/example.tex

\mode<presentation>


%-------------------------------------------------------------------------------------------------
% Define headline and foot line widths
%-------------------------------------------------------------------------------------------------
\newlength{\footlineWidth}
\setlength{\footlineWidth}{3mm}


\newlength{\headlineWidth}
% \setlength{\headlineWidth}{13mm}
\setlength{\headlineWidth}{10mm}  % customized by Wu Sun, 21 Mar 2017
% do not use two line titles


%-------------------------------------------------------------------------------------------------
% Frame title
%-------------------------------------------------------------------------------------------------
\defbeamertemplate*{frametitle}{ucla}[1][]
{
\nointerlineskip
\begin{beamercolorbox}[wd=\paperwidth, sep=0pt, ht=\headlineWidth]{frametitle} 
	\begin{tikzpicture}
	% Blue background:
	\useasboundingbox[fill=uclaBlueDark] (0,0) rectangle (\paperwidth,\headlineWidth);

	% % Gold bar:
	% \fill[uclaGoldDark] (0,0) rectangle (\paperwidth,0.5\footlineWidth);

	% Gold bar (customized by Wu Sun, 21 Mar 2017):
	\fill[uclaGoldDark] (0,0) rectangle (\paperwidth,1mm);
	
	% Title:
	\node[align=left,
		  text width=\textwidth] at (0.5\paperwidth, 0.5\headlineWidth+0.25\footlineWidth)
		{\usebeamercolor[fg]{frametitle}\usebeamerfont{frametitle}\baselineskip=15pt\insertframetitle\\
		 \usebeamercolor[fg]{framesubtitle}\usebeamerfont{framesubtitle}\insertframesubtitle\par};

	% section head
	\node[align=right, text width=0.25\textwidth, anchor=west] at (0.75\paperwidth, 0.5\headlineWidth+0.25\footlineWidth) {\usebeamercolor[fg]{frametitle}\normalfont\tiny\baselineskip=8pt\insertsectionhead\par};

	\end{tikzpicture}
\end{beamercolorbox}
}



%-------------------------------------------------------------------------------------------------
% Footer:
%-------------------------------------------------------------------------------------------------
% Variables to control slide number:
\newif\ifslidenumber
\slidenumberfalse
\newcommand{\showSlideNumber}{\slidenumbertrue}

\newlength{\slideNumberWidth}
\setlength{\slideNumberWidth}{0.75cm}

\setbeamertemplate{footline}
{
	\begin{tikzpicture}
	% Bars:
	%\useasboundingbox[fill=uclaBlueDark] (0,0) rectangle (\paperwidth,\footlineWidth);
	%\fill[uclaGoldDark] (0,0.5\footlineWidth) rectangle (\paperwidth,\footlineWidth);

	\useasboundingbox[fill=uclaBlueDark] (0,0) rectangle (\paperwidth,0.5\footlineWidth);

	% Slide number:
	\ifslidenumber
		\fill[uclaBlueDark] (\paperwidth,0.0) -- 
							++(0.0,\footlineWidth) --
							++(-\slideNumberWidth, 0.0)  --
							++(225:1.4\footlineWidth) --
							cycle;
		\node[left, 
			  font={\usebeamercolor[fg]{slide number}\usebeamerfont{slide number}}] 
			at (0.99\paperwidth,0.5\footlineWidth) {\insertframenumber};
	\fi
	\end{tikzpicture}
}


\mode<all>
